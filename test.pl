while (<>){
    s["(?:\\"|""|\\\\|[^"])*"]{ 
        $& =~ /"\$(.*)"/ ? $1 : $& 
    }eg;
    print $_;
}
